"use strict";(self["webpackChunkvue_gamewebsite_3"]=self["webpackChunkvue_gamewebsite_3"]||[]).push([[586],{8477:function(t,s,a){a.d(s,{Z:function(){return n}});var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("preLoading",{staticStyle:{"background-color":"white"},attrs:{active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}},[a("div",{staticClass:"sk-chase"},[a("div",{staticClass:"sk-chase-dot"}),a("div",{staticClass:"sk-chase-dot"}),a("div",{staticClass:"sk-chase-dot"}),a("div",{staticClass:"sk-chase-dot"}),a("div",{staticClass:"sk-chase-dot"}),a("div",{staticClass:"sk-chase-dot"})])])],1)},o=[],i={data(){return{}},computed:{isLoading(){return this.$store.state.isLoading}}},r=i,c=a(1001),l=(0,c.Z)(r,e,o,!1,null,null,null),n=l.exports},9586:function(t,s,a){a.r(s),a.d(s,{default:function(){return d}});var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("PreLoading"),a("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[t._v("一旦送出後，就無法再更改囉!")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.createOrder}},[t._v(" 確認送出 ")])])])])]),a("div",{staticClass:"container"},[t._m(1),a("div",{staticClass:"row my-5 order-list justify-content-center"},[void 0!==t.cartData&&t.cartData.length>=1?[a("h2",{staticClass:"text-center font-letter font-weight-bold bg-secondary mb-0 col-11 py-3"},[t._v(" 購物清單 ")]),t._l(t.cartData,(function(s){return a("div",{key:s.id,staticClass:"col-11 test-list bg-yellow"},[a("div",{staticClass:"item-image"},[a("img",{attrs:{src:s.imageUrl,alt:"product"}}),a("p",{staticClass:"mt-2"},[t._v(t._s(t._f("currency")(s.price)))]),t.coupons?a("p",{staticClass:"text-success"},[t._v("套用優惠券")]):t._e()]),a("div",{staticClass:"item-info d-flex flex-column align-items-center"},[a("p",[t._v(t._s(s.name))]),a("div",{staticClass:"qty justify-content-center d-flex"},[a("button",{staticClass:"btn btn-light",attrs:{disabled:s.qty<=1,type:"button"},on:{click:function(t){s.qty--}}},[a("font-awesome-icon",{attrs:{icon:"minus"}})],1),a("input",{directives:[{name:"model",rawName:"v-model.number",value:s.qty,expression:"item.qty",modifiers:{number:!0}}],staticClass:"form-control text-center",attrs:{type:"number",min:"0"},domProps:{value:s.qty},on:{input:function(a){a.target.composing||t.$set(s,"qty",t._n(a.target.value))},blur:function(s){return t.$forceUpdate()}}}),a("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(t){s.qty++}}},[a("font-awesome-icon",{attrs:{icon:"plus"}})],1)])]),a("div",{staticClass:"item-price"},[a("p",[t._v("小計")]),a("p",[t._v(t._s(s.price*s.qty))])]),a("div",{staticClass:"deleteItem"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.removeLocalItem(s.product_id)}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-trash-can"}})],1)])])})),a("div",{staticClass:"col-11 d-flex flex-column bg-yellow text-danger item-footer align-items-center"},[a("div",{staticClass:"total-price d-flex mt-4"},[a("p",[t._v("總計:")]),a("p",[t._v(t._s(t._f("currency")(t.totalCart)))])]),t.coupons?a("div",{staticClass:"total-discount d-flex text-success"},[a("p",[t._v("折扣價:")]),a("p",[t._v(t._s(t._f("currency")(t.totalDiscount)))])]):t._e()])]:t._e(),a("div",{staticClass:"col-11 bg-yellow pb-2 mt-5"},[a("h3",{staticClass:"font-letter mb-3 font-weight-bold bg-secondary"},[t._v(" 客戶資料 ")]),a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("th",{attrs:{width:"100"}},[t._v("Email")]),a("td",[t._v(t._s(t.localCustomer.user.email))])]),a("tr",[a("th",[t._v("姓名")]),a("td",[t._v(t._s(t.localCustomer.user.name))])]),a("tr",[a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("收件人電話")]),a("td",[t._v(t._s(t.localCustomer.user.tel))])]),a("tr",[a("th",[t._v("收件人地址")]),a("td",[t._v(t._s(t.localCustomer.user.address))])]),a("tr",[a("th",[t._v("付款狀態")]),a("td",[t.order.is_paid?a("span",{staticClass:"text-success"},[t._v("付款完成")]):a("span",{staticClass:"text-danger"},[t._v("尚未付款")])])])])]),a("div",{staticClass:"text-right"},[a("router-link",{staticClass:"mr-2",attrs:{to:"/front-end/order-check"}},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.clearCoupon}},[t._v(" 取消 ")])]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-toggle":"modal","data-target":"#exampleModal"}},[t._v(" 送出訂單 ")])],1)])],2)])],1)},o=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("貼心提醒")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"row my-5 justify-content-center"},[a("div",{staticClass:"col-md-7 col-12"},[a("div",{staticClass:"row step"},[a("div",{staticClass:"col-6 col-lg text-center step-point-line"},[a("span",{staticClass:"bg-grass px-4 py-2 rounded-pill mb-3 d-inline-block"},[t._v(" STEP 1 ")]),a("p",[t._v("填寫訂單")])]),a("div",{staticClass:"col-6 col-lg text-center step-point-line step-point"},[a("span",{staticClass:"border bg-deepGrass px-4 py-2 rounded-pill text-info mb-3 d-inline-block"},[t._v(" STEP 2 ")]),a("p",[t._v("送出訂單")])]),a("div",{staticClass:"col-6 col-lg text-center step-point-line"},[a("span",{staticClass:"border bg-grass px-4 py-2 rounded-pill text-info mb-3 d-inline-block"},[t._v(" STEP 3 ")]),a("p",[t._v("確認付款")])]),a("div",{staticClass:"col-6 col-lg text-center"},[a("span",{staticClass:"border bg-grass px-4 py-2 rounded-pill text-info mb-3 d-inline-block"},[t._v(" STEP 4 ")]),a("p",[t._v("完成付款")])])])])])}],i=a(8477),r={data(){return{cart:{},cartItem:[],order:{user:{}},orderId:"",cartData:JSON.parse(localStorage.getItem("cartData"))||[],localCustomer:JSON.parse(localStorage.getItem("localCustomer"))||[],coupon:JSON.parse(localStorage.getItem("coupon"))||!1}},components:{PreLoading:i.Z},methods:{getCart(){const t=this,s="https://vue-course-api.hexschool.io/api/benson/cart";t.$store.dispatch("updateLoading",!0),t.$http.get(s).then((s=>{t.cart=s.data.data,t.cartItem=t.cart.carts,t.$store.dispatch("updateLoading",!1)}))},createOrder(){const t=this,s="https://vue-course-api.hexschool.io/api/benson/order",a=t.localCustomer;t.$http.post(s,{data:a}).then((s=>{s.data.success?(this.$bus.$emit("message:push","送出成功","success"),localStorage.clear(),t.orderId=s.data.orderId,t.$router.push(`/front-end/order-pay/${t.orderId}`)):this.$bus.$emit("message:push","送出失敗","danger")}))},clearCoupon(){localStorage.removeItem("coupon")}},computed:{totalCart(){return this.cartData.reduce(((t,s)=>t+s.price*s.qty),0)},totalDiscount(){return this.cartData.reduce(((t,s)=>t+s.price*s.qty*.8),0)}},created(){this.getCart()}},c=r,l=a(1001),n=(0,l.Z)(c,e,o,!1,null,"2c48b865",null),d=n.exports}}]);
//# sourceMappingURL=586.d773dba8.js.map