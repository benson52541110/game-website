"use strict";(self["webpackChunkvue_gamewebsite_3"]=self["webpackChunkvue_gamewebsite_3"]||[]).push([[586],{8477:function(t,a,s){s.d(a,{Z:function(){return l}});var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("preLoading",{staticStyle:{"background-color":"white"},attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}},[s("div",{staticClass:"sk-chase"},[s("div",{staticClass:"sk-chase-dot"}),s("div",{staticClass:"sk-chase-dot"}),s("div",{staticClass:"sk-chase-dot"}),s("div",{staticClass:"sk-chase-dot"}),s("div",{staticClass:"sk-chase-dot"}),s("div",{staticClass:"sk-chase-dot"})])])],1)},o=[],i={data:function(){return{}},computed:{isLoading:function(){return this.$store.state.isLoading}}},n=i,c=s(1001),r=(0,c.Z)(n,e,o,!1,null,null,null),l=r.exports},9586:function(t,a,s){s.r(a),s.d(a,{default:function(){return d}});var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("PreLoading"),s("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[t._m(0),s("div",{staticClass:"modal-body"},[t._v("一旦送出後，就無法再更改囉!")]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),s("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.createOrder}},[t._v(" 確認送出 ")])])])])]),s("div",{staticClass:"container"},[t._m(1),s("div",{staticClass:"row my-5 order-list justify-content-center"},[void 0!==t.cartData&&t.cartData.length>=1?[s("h2",{staticClass:"text-center font-letter font-weight-bold bg-secondary mb-0 col-11 py-3"},[t._v(" 購物清單 ")]),t._l(t.cartData,(function(a){return s("div",{key:a.id,staticClass:"col-11 test-list bg-yellow"},[s("div",{staticClass:"item-image"},[s("img",{attrs:{src:a.imageUrl,alt:"product"}}),s("p",{staticClass:"mt-2"},[t._v(t._s(t._f("currency")(a.price)))]),t.coupons?s("p",{staticClass:"text-success"},[t._v("套用優惠券")]):t._e()]),s("div",{staticClass:"item-info d-flex flex-column align-items-center"},[s("p",[t._v(t._s(a.name))]),s("div",{staticClass:"qty justify-content-center d-flex"},[s("button",{staticClass:"btn btn-light",attrs:{disabled:a.qty<=1,type:"button"},on:{click:function(t){a.qty--}}},[s("font-awesome-icon",{attrs:{icon:"minus"}})],1),s("input",{directives:[{name:"model",rawName:"v-model.number",value:a.qty,expression:"item.qty",modifiers:{number:!0}}],staticClass:"form-control text-center",attrs:{type:"number",min:"0"},domProps:{value:a.qty},on:{input:function(s){s.target.composing||t.$set(a,"qty",t._n(s.target.value))},blur:function(a){return t.$forceUpdate()}}}),s("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(t){a.qty++}}},[s("font-awesome-icon",{attrs:{icon:"plus"}})],1)])]),s("div",{staticClass:"item-price"},[s("p",[t._v("小計")]),s("p",[t._v(t._s(a.price*a.qty))])]),s("div",{staticClass:"deleteItem"},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.removeLocalItem(a.product_id)}}},[s("font-awesome-icon",{attrs:{icon:"fa-solid fa-trash-can"}})],1)])])})),s("div",{staticClass:"col-11 d-flex flex-column bg-yellow text-danger item-footer align-items-center"},[s("div",{staticClass:"total-price d-flex mt-4"},[s("p",[t._v("總計:")]),s("p",[t._v(t._s(t._f("currency")(t.totalCart)))])]),t.coupons?s("div",{staticClass:"total-discount d-flex text-success"},[s("p",[t._v("折扣價:")]),s("p",[t._v(t._s(t._f("currency")(t.totalDiscount)))])]):t._e()])]:t._e(),s("div",{staticClass:"col-11 bg-yellow pb-2 mt-5"},[s("h3",{staticClass:"font-letter mb-3 font-weight-bold bg-secondary"},[t._v(" 客戶資料 ")]),s("table",{staticClass:"table"},[s("tbody",[s("tr",[s("th",{attrs:{width:"100"}},[t._v("Email")]),s("td",[t._v(t._s(t.localCustomer.user.email))])]),s("tr",[s("th",[t._v("姓名")]),s("td",[t._v(t._s(t.localCustomer.user.name))])]),s("tr",[s("th",{staticStyle:{"white-space":"nowrap"}},[t._v("收件人電話")]),s("td",[t._v(t._s(t.localCustomer.user.tel))])]),s("tr",[s("th",[t._v("收件人地址")]),s("td",[t._v(t._s(t.localCustomer.user.address))])]),s("tr",[s("th",[t._v("付款狀態")]),s("td",[t.order.is_paid?s("span",{staticClass:"text-success"},[t._v("付款完成")]):s("span",{staticClass:"text-danger"},[t._v("尚未付款")])])])])]),s("div",{staticClass:"text-right"},[s("router-link",{staticClass:"mr-2",attrs:{to:"/front-end/order-check"}},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.clearCoupon}},[t._v(" 取消 ")])]),s("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-toggle":"modal","data-target":"#exampleModal"}},[t._v(" 送出訂單 ")])],1)])],2)])],1)},o=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("貼心提醒")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"row my-5 justify-content-center"},[s("div",{staticClass:"col-md-7 col-12"},[s("div",{staticClass:"row step"},[s("div",{staticClass:"col-6 col-lg text-center step-point-line"},[s("span",{staticClass:"bg-grass px-4 py-2 rounded-pill mb-3 d-inline-block"},[t._v(" STEP 1 ")]),s("p",[t._v("填寫訂單")])]),s("div",{staticClass:"col-6 col-lg text-center step-point-line step-point"},[s("span",{staticClass:"border bg-deepGrass px-4 py-2 rounded-pill text-info mb-3 d-inline-block"},[t._v(" STEP 2 ")]),s("p",[t._v("送出訂單")])]),s("div",{staticClass:"col-6 col-lg text-center step-point-line"},[s("span",{staticClass:"border bg-grass px-4 py-2 rounded-pill text-info mb-3 d-inline-block"},[t._v(" STEP 3 ")]),s("p",[t._v("確認付款")])]),s("div",{staticClass:"col-6 col-lg text-center"},[s("span",{staticClass:"border bg-grass px-4 py-2 rounded-pill text-info mb-3 d-inline-block"},[t._v(" STEP 4 ")]),s("p",[t._v("完成付款")])])])])])}],i=(s(2222),s(1539),s(8477)),n={data:function(){return{cart:{},cartItem:[],order:{user:{}},orderId:"",cartData:JSON.parse(localStorage.getItem("cartData"))||[],localCustomer:JSON.parse(localStorage.getItem("localCustomer"))||[],coupon:JSON.parse(localStorage.getItem("coupon"))||!1}},components:{PreLoading:i.Z},methods:{getCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("benson","/cart");t.$store.dispatch("updateLoading",!0),t.$http.get(a).then((function(a){t.cart=a.data.data,t.cartItem=t.cart.carts,t.$store.dispatch("updateLoading",!1)}))},createOrder:function(){var t=this,a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("benson","/order"),e=a.localCustomer;a.$http.post(s,{data:e}).then((function(s){s.data.success?(t.$bus.$emit("message:push","送出成功","success"),localStorage.clear(),a.orderId=s.data.orderId,a.$router.push("/front-end/order-pay/".concat(a.orderId))):t.$bus.$emit("message:push","送出失敗","danger")}))},clearCoupon:function(){localStorage.removeItem("coupon")}},computed:{totalCart:function(){return this.cartData.reduce((function(t,a){return t+a.price*a.qty}),0)},totalDiscount:function(){return this.cartData.reduce((function(t,a){return t+a.price*a.qty*.8}),0)}},created:function(){this.getCart()}},c=n,r=s(1001),l=(0,r.Z)(c,e,o,!1,null,"2c48b865",null),d=l.exports}}]);
//# sourceMappingURL=586-legacy.ce84deda.js.map